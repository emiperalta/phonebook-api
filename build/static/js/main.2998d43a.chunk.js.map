{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/phonebook.js","App.js","index.js"],"names":["Filter","handleChange","nameFilter","onChange","value","PersonForm","handleSubmit","handleChangeName","handleChangeNumber","newName","newNumber","onSubmit","type","Persons","handleDelete","person","name","number","onClick","_id","REACT_APP_APIKEY","process","App","useState","persons","setPersons","setNewName","setNewNumber","setNameFilter","error","setError","message","setMessage","useEffect","fetch","then","res","json","allPersons","id","p","find","window","confirm","method","headers","deletePhone","personsUpd","filter","style","color","e","target","preventDefault","already_saved","body","JSON","stringify","updateNumber","updPerson","per","catch","err","setTimeout","result","Error","addPhone","newPerson","toLocaleLowerCase","startsWith","map","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2998d43a.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({ handleChange, nameFilter }) => {\r\n  return (\r\n    <div>\r\n      filter shown with\r\n      <input onChange={handleChange} value={nameFilter} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Filter;\r\n","import React from 'react';\r\n\r\nconst PersonForm = ({\r\n  handleSubmit,\r\n  handleChangeName,\r\n  handleChangeNumber,\r\n  newName,\r\n  newNumber,\r\n}) => {\r\n  return (\r\n    <>\r\n      {' '}\r\n      <form onSubmit={handleSubmit}>\r\n        <div>\r\n          name: <input onChange={handleChangeName} value={newName} />\r\n        </div>\r\n        <div>\r\n          number: <input onChange={handleChangeNumber} value={newNumber} />\r\n        </div>\r\n        <div>\r\n          <button type='submit'>add</button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from 'react';\r\n\r\nconst Persons = ({ handleDelete, person }) => {\r\n  return (\r\n    <section>\r\n      {person.name} {person.number}{' '}\r\n      <button onClick={() => handleDelete(person._id)}>delete</button>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","const { REACT_APP_APIKEY } = process.env;\r\n\r\nexport const getAll = () => {\r\n  return fetch(REACT_APP_APIKEY).then(res => res.json());\r\n};\r\n\r\nexport const addPhone = ({ name, number }) => {\r\n  return fetch(REACT_APP_APIKEY, {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ name, number }),\r\n  })\r\n    .then(res => res.json())\r\n    .then(result => {\r\n      if (result.error) throw Error(result.error);\r\n      return result;\r\n    });\r\n};\r\n\r\nexport const deletePhone = id => {\r\n  return fetch(`${REACT_APP_APIKEY}/${id}`, {\r\n    method: 'DELETE',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n  });\r\n};\r\n\r\nexport const updateNumber = (id, { name, number }) => {\r\n  return fetch(`${REACT_APP_APIKEY}/${id}`, {\r\n    method: 'PUT',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({ name, number }),\r\n  }).then(res => res.json());\r\n};\r\n","import React, { useEffect, useState } from 'react';\n\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\n\nimport { getAll, addPhone, deletePhone, updateNumber } from './services/phonebook';\n\nfunction App() {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState('');\n  const [newNumber, setNewNumber] = useState('');\n  const [nameFilter, setNameFilter] = useState('');\n  const [error, setError] = useState('');\n  const [message, setMessage] = useState('');\n\n  useEffect(() => {\n    getAll().then(allPersons => setPersons(allPersons));\n  }, []);\n\n  const handleSubmit = e => {\n    e.preventDefault();\n\n    const already_saved = persons.find(({ name }) => newName === name);\n    if (already_saved && newNumber) {\n      const result = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one?`\n      );\n\n      result &&\n        updateNumber(already_saved._id, { name: newName, number: newNumber })\n          .then(updPerson => {\n            const p = persons.find(per => per._id === updPerson._id);\n            setPersons([...persons, (p.number = updPerson.number)]);\n          })\n          .catch(err => {\n            setError(\n              `Information of '${newName}' has already been removed from server`\n            );\n            setTimeout(() => setError(''), 5000);\n          });\n    } else {\n      addPhone({ name: newName, number: newNumber })\n        .then(newPerson => {\n          setPersons([...persons, newPerson]);\n          setMessage(`'${newName}' added`);\n          setTimeout(() => setMessage(''), 5000);\n        })\n        .catch(err => {\n          setError(`${err}`);\n          setTimeout(() => setError(''), 5000);\n        });\n      setNewName('');\n      setNewNumber('');\n    }\n  };\n\n  const handleDelete = id => {\n    const p = persons.find(p => p._id === id);\n    const result = window.confirm(`Delete ${p.name}?`);\n    result &&\n      deletePhone(id).then(() => {\n        const personsCopy = [...persons];\n        const personsUpd = personsCopy.filter(p => p._id !== id);\n        setPersons(personsUpd);\n      });\n  };\n\n  const handleChangeName = e => setNewName(e.target.value);\n  const handleChangeNumber = e => setNewNumber(e.target.value);\n  const handleChangeFilter = e => setNameFilter(e.target.value);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n      {message && <p style={{ color: 'green' }}>{message}</p>}\n\n      <Filter handleChange={handleChangeFilter} nameFilter={nameFilter} />\n\n      <h2>add new</h2>\n\n      <PersonForm\n        handleSubmit={handleSubmit}\n        handleChangeName={handleChangeName}\n        handleChangeNumber={handleChangeNumber}\n        newName={newName}\n        newNumber={newNumber}\n      />\n\n      <h2>Numbers</h2>\n      {persons\n        .filter(\n          ({ name }) =>\n            name &&\n            name.toLocaleLowerCase().startsWith(nameFilter.toLocaleLowerCase())\n        )\n        .map(person => (\n          <Persons handleDelete={handleDelete} key={person._id} person={person} />\n        ))}\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}